{"mappings":"AAEA,MAAMA,EAAO,CACXC,WAAYC,SAASC,cAAc,gBACnCC,UAAWF,SAASC,cAAc,aAI9BE,EAAkB,ICRT,MAMbC,cAGE,OAAOC,MACL,qEAAmDC,KAAKC,4FAEhDD,KAAKE,qBAEZC,MAAKC,IACJ,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,QAE3B,OAAOH,EAASI,MAAM,IAEvBL,MAAK,EAACM,KAAEA,MACPT,KAAKU,gBACED,I,CAIbC,gBACEV,KAAKE,MAAQ,C,CAGfS,YACEX,KAAKE,KAAO,C,CAGVU,YACF,OAAOZ,KAAKC,W,CAGVW,UAAMC,GACRb,KAAKC,YAAcY,C,CAtCrBC,cACEd,KAAKC,YAAc,GACnBD,KAAKE,KAAO,C,GDyChB,SAASa,EAAiBN,GACxB,MAAMO,EAASP,EAAKQ,KAAIC,GACf,yEAE2BA,EAAIC,4DACAD,EAAIE,sBAAsBF,EAAIG,iHAEzBH,EAAII,2DACJJ,EAAIK,8DACDL,EAAIM,kEACHN,EAAIO,sEAOrDjC,EAAKI,UAAU8B,mBAAmB,YAAaV,EAAOW,KAAK,I,CAnD7DnC,EAAKC,WAAWmC,iBAAiB,UAGjC,SAAkBC,GAKhB,GAJAA,EAAIC,iBAEJjC,EAAgBe,MAAQiB,EAAIE,cAAcC,SAAS/B,YAAYgC,MAAMC,OAEvC,KAA1BrC,EAAgBe,MAClB,OAAOuB,MAAM,kBAGF3C,EAARI,UAAUwC,UAAY,GAE3BvC,EAAgBc,YAChBd,EACGC,cACAK,MAAKM,IACAA,EAAK4B,OAAS,EAChBtB,EAAiBN,GAEjB6B,QAAQC,IAAI,qBAAqB,IAGpCC,OAAMC,GAASH,QAAQC,IAAIE,I,IAvBhCjD,EAAKkD,WAAWd,iBAAiB,SA0BjC,WACE/B,EACGC,cACAK,MAAKM,GAAQM,EAAiBN,KAC9B+B,OAAMC,GAASH,QAAQC,IAAIE,I","sources":["src/index.js","src/js/fetchImages.js"],"sourcesContent":["import ImagesApiService from './js/fetchImages';\n\nconst refs = {\n  searchForm: document.querySelector('.search-form'),\n  cardsList: document.querySelector('.gallery'),\n  // buttonMore: document.querySelector('.load-more'),\n};\n\nconst imageApiService = new ImagesApiService();\n\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.buttonMore.addEventListener('click', onLoadMore);\n\nfunction onSearch(evt) {\n  evt.preventDefault();\n\n  imageApiService.query = evt.currentTarget.elements.searchQuery.value.trim();\n\n  if (imageApiService.query === '') {\n    return alert('Введите запрос');\n  }\n\n  refs.cardsList.innerHTML = '';\n\n  imageApiService.resetPage();\n  imageApiService\n    .fetchImages()\n    .then(hits => {\n      if (hits.length > 0) {\n        markupListImages(hits);\n      } else {\n        console.log('ничего не найдено.');\n      }\n    })\n    .catch(error => console.log(error));\n}\n\nfunction onLoadMore() {\n  imageApiService\n    .fetchImages()\n    .then(hits => markupListImages(hits))\n    .catch(error => console.log(error));\n}\n\nfunction markupListImages(hits) {\n  const markup = hits.map(hit => {\n    return `\n      <div class=\"photo-card\">\n      <a class=\"gallery-link\" href=\"${hit.largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" loading=\"lazy\" width=\"300\" />\n        <div class=\"info\">\n            <p class=\"info-item\"><b>Likes</b>${hit.likes}</p>\n            <p class=\"info-item\"><b>Views</b>${hit.views}</p>\n            <p class=\"info-item\"><b>Comments</b>${hit.comments}</p>\n            <p class=\"info-item\"><b>Downloads</b>${hit.downloads}</p>\n        </div>\n        </a>\n      </div>\n      `;\n  });\n  // refs.cardsList.innerHTML = markup.join('');\n  refs.cardsList.insertAdjacentHTML('beforeend', markup.join(''));\n}\n","export default class ImagesApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  fetchImages() {\n    const url = 'https://pixabay.com/api/';\n\n    return fetch(\n      `${url}?key=36679994-fdec862cf8a926d17bd3d37a5&q=${this.searchQuery}\n      &image_type=photo&orientation=horizontal&safesearch=true\n      &page=${this.page}&per_page=40&`\n    )\n      .then(response => {\n        if (!response.ok) {\n          throw new Error(response.status);\n        }\n        return response.json();\n      })\n      .then(({ hits }) => {\n        this.incrementPage();\n        return hits;\n      });\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n"],"names":["$1f0dc3b9307be026$var$refs","searchForm","document","querySelector","cardsList","$1f0dc3b9307be026$var$imageApiService","fetchImages","fetch","this","searchQuery","page","then","response","ok","Error","status","json","hits","incrementPage","resetPage","query","newQuery","constructor","$1f0dc3b9307be026$var$markupListImages","markup","map","hit","largeImageURL","webformatURL","tags","likes","views","comments","downloads","insertAdjacentHTML","join","addEventListener","evt","preventDefault","currentTarget","elements","value","trim","alert","innerHTML","length","console","log","catch","error","buttonMore"],"version":3,"file":"index.d3e1949d.js.map"}